# 클라이언트에서 ajax 를 이용한 프레그먼트 통합

- Ajax 를 이용해서 페이지 새로고침 없이 데이터를 서버로부터 가져온 다음 화면에 변경
- 같은 서버가 아니라 다른 서버로부터 HTML 템플릿을 받아서 innerHTML 을 이용하면 코드 조각을
  공유
- Link 태그는 innerHTML 을 통해 적용이 가능하지만, Script 태그는 불가능 (직접 append 해
  서 처리)
- 페이지와 프레그먼트를 각자 개발한 후, 각자의 서버에서 배포

> **Asynchronous JavaScript and XML**
>
> - 자바스크립트를 이용해서 비동기적으로 서버에 있는 데이터(XML 등)를 받아오는 기법
> - XML 만을 의미하는 것이 아니라 JSON, HTML 을 이용
> - 과거 브라우저에서는 XMLHttpRequest 를 이용했으나, 최근 모던 브라우저에서는 Fetch 이용
> - 현재는 당연한 방식이지만 Ajax 가 대중화되기 전까지는 정적 파일만으로 사이트를 구성
> - 보통 한 서버 안에서 Ajax 를 통해 동적으로 받아온 후 DOM 을 추가하거나 변경하는 식으로 새로고침 없는 서비스 레벨로 진화 -> 다른 서버에서 받아오는 방식을 이용해서 분리된 서버 운영 가능

### 특징

- URL 이 절대적이어야 함 (ex: `http://localhost:3002/...`)
- 다른 서버의 리소스를 가져오지만, 동일한 문서내에서 실행 ➡️ 그래서 자연스럽고, 구현이 어렵지 않음
- iframe 에 비해 성능 문제가 적음
- 프레그먼트를 포함하는 팀이 프레그먼트의 높이를 미리 알아내야할 필요가 없음 ➡️ 자동으로 조정됨
- 에러 처리나 로딩에 관련해서 처리가 용이
- 서버에서 템플릿을 생성해서 제공하는 경우에 더 적합

### 단점

- 비동기 로드로 인해 지연이 발생 ➡️ 이를 위한 사전 협의를 통해 깜박이는 문제를 최소화해야함
- 스타일과 스크립트의 격리 문제에 주의를 기울여야 함 ➡️ 네임스페이스와 같은 규칙을 도입해야함
- UI 가 네트워크에 의존적
- 같은 프레그먼트를 여러 곳에서 사용할 경우 문제가 발생하거나 불필요하게 중복될 수 있음
- 프레그먼트에서 스크립트를 사용하는 경우, 페이지의 스크립트와의 연동에 추가적인 구현이 필요
