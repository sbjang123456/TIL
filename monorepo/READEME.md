# 모노리포(Monorepo)

모노레포는 잘 정의된 관계를 가진 여러 개의 개별 프로젝트가 포함된 단일 리포지토리

### Monorepo 와 Multirepo(Polyrepo)

"_모듈로 나누어 연관 짓는다_" 라는 개념 아래서 하나의 레포로 관리하면 **Monorepo**,  
모듈마다 레포를 각자 가지고 관리하면 **Polyrepo** 혹은 **Multirepo**

- 싱글 레포지토리는 단독으로 동작하는 앱이거나 독립적이고 범용적인 라이브러리에 어울리는 형태
- 멀티 레포지토리(폴리레포)는 여러개의 레포지토리가 서로 유기적으로 관계를 가지면서 개발하는 방식
- 모노 레포지토리는 단일 레포지토리이면서 내부에 여러 패키지가 유기적으로 서로 관계를 가지면서 함께 개발하는 방식

## 모노레포의 특징

- 루트 프로젝트가 앱이나 라이브러리가 되진 않는다.
  - _보통 각각의 워크스페이스를 관리하는 역할 수행_
- 루트 프로젝트와 각각의 워크스페이스가 가지고 있는 외부 의존성이 효율적으로 관리되어야 한다.
  - _이를 위해 적절한 패키지 관리자를 선정 필요_
- 각각의 워크스페이스를 독립적으로 제작하기 보다는 유기적으로 작업하기 때문에 패키지 간 의존성이 명확해야 하고 의존성을 바탕으로 태스크를 수행해야 한다.
  - _이를 위해 적절한 모노레포 빌드 시스템 도구를 활용_
- 각각의 워크스페이스는 앱으로 실행될 수도 있고, 모듈로서 다른 앱이나 모듈에서 사용될 수 있다.
  - **모듈인 워크스페이스는 패키지로 명확하게 노출**
  - _패키지 제작을 위해 여러가지 도구를 사용_

## Monorepo 의 장단점

### 장점

- 이슈 수정을 하다가 라이브러리를 수정해야 해서 번거러운 일이 발생하지 않는다. (=> _이슈 기반의 커밋_)
- 전체 히스토리가 한번에 보인다.
- 기존 코드를 활용할 때 드는 비용이 작다.
- 프로젝트를 새로 생성할 때, 비용이 작다.
- 각 프로젝트마다 설정이 일관적이고 같은 DX(개발자 경험) 를 가질 수 있다.

### 단점

- 모노레포를 운영을 위한 추가적인 학습이 필요하고, 모노레포 툴을 사용한다면 툴에 대한 학습도 필요하다.
- 상대적으로 의존성 연결이 쉽기 때문에 과도한 의존 관계가 나타날 수 있다.
- 하나의 CI 를 구성할 수는 있지만, 방법이 복잡할 수 있다.
- 많은 코드가 변경될 경우 태스크 실행이 매우 느려질 수 있다.
- 저장소 자체가 빠르게 무거워질 수 있다.
- 모든 코드가 밀집되어 있어 사소한 문제가 크게 확대될 가능성이 있다.
