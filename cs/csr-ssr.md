# CSR 과 SSR

## 웹 어플리케이션 역사

초창기 웹은 텍스트 중심의 단순 문서

### MPA (Multi Page Application)

다중 페이지로 구성되어있어 **변경사항이 발생할 떄마다 서버로 페이지 요청해서 새로 렌더링** (➡️ _초창기의 웹_)

| MPA           | SPA           |
| ------------- | ------------- |
| SSR 방식 채택 | CSR 방식 채택 |

- 페이지를 이동할 때마다 서버로부터 새로운 html 파일을 내려받기 때문에 새로고침 발생 (➡️ _유저는 새로고침이 발생할 때마다 깜빡이는 화면을 볼 수 밖에 없음_)
- 웹이 발전함에 따라 _사진_, _영상_, *인터랙션*이 많이 추가되고, **복잡도**가 높아지면서 성능 이슈가 발생
- **ajax** 등장
  - 필요한 부분만 리로드 할 수 있게 해줌
  - **ajax** 의 등장으로 인해 계속해서 서버로부터 파일을 내려받는게 아닌 필요한 부분만 리로드 할 수 있도록 도와주게 됨

### SPA (Single Page Application)

단일 페이지로 구성되어 있어 **갱신될 부분에 대해서만 데이터를 요청하여 렌더링**

- 새로고침이 발생하지 않기 때문에 사용자 경험 향상

## CSR, SSR, SSG

> 🌞 **참조**
>
> - TTFB (Time to First Byte) : 👉 _요청을 보내고 응답의 첫 번째 바이트가 도착하기까지의 시간_
> - FCP (First Contentful Paint) : 👉 _사용자가 화면에서 콘텐츠를 볼 수 있는 페이지 로드 타임라인의 첫 번째 지점_
> - TTI (Time To Interact) : 👉 _사용자가 페이지에서 상호작용이 가능하기까지의 시간_
> - TBT (Total Blocking Time) : 👉 _FCP 로부터 TTI (Time To Interact) 사이의 시간_

### CSR (**_Client Side_** Rendering)

클라이언트 측에서 렌더링을 담당

- 첫 로딩에 빈 html 파일에 필요한 번들파일을 모두 다운로드

#### CSR 동작 흐름

1. 사용자 웹 접속
2. 브라우저가 서버에 리소스 요청
3. 서버는 js, css 를 불러올 수 있는 html 파일을 브라우저에 전송
4. 브라우저 코드 다운로드 후 렌더링을 해서 사용자에게 페이지 제공

※ TTFB (Time to First Byte) 빠르다는 장점이 있지만, FCP (First Contentful Paint) 좋지 않다는 단점이 있음.

### SSR (**_Server Side_** Rendering)

서버 측에서 렌더링을 담당

- 서버 측에서 렌더링 될 페이지를 그려 클라이언트로 내려주는 방식

※ **요청 시 즉시 동적으로 html 파일을 만드는지 vs 미리 다 만들어진 정적 페이지를 제공하는지 (Static Site Generation)**

#### SSR 동작 흐름

1. 사용자가 웹에 접속
2. 브라우저가 서버에 리소스 요청
3. 서버는 초기 컨텐츠가 로딩된 페이지를 제공
4. 브라우저는 초기 컨텐츠가 로딩된 페이지와 자바스크립트 코드를 다운받고, 먼저 html 파일을 사용자에게 보여줌 (현재 이 페이지는 정적이며 버튼을 눌러도 응답이 없을 수 있음)
5. 다운받은 자바스크립트 코드를 실행하여 이벤트 리스너 등을 할당해서 인터랙티브한 페이지를 제공

※ FCP (First Contentful Paint) 빠르다는 장점이 있지만, TBT (Total Blocking Time) 이 생긴다는 단점이 있음

### CSR , SSR 장담점 비교

|      | CSR                                                                        | SSR                                                                                                |
| ---- | -------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| 장점 | 화면 깜빡임 없어 좋은 사용자 경험 제공 <br/> 초기 로딩 이후 구동 속도 빠름 | 초기 로딩속도 빠름 <br /> SEO 쉬움                                                                 |
| 단점 | 초기 구동 속도 느림 <br /> SEO 어려움                                      | 페이지 이동 시 화면 깜빡임으로 사용자 경험 저하<br /> 매번 요청을 보내기 때문에 서버 과부화 가능성 |

#### SEO (Search Engine Optimization)

웹 사이트 검색 결과가 더 잘 보이도록 최적화 하는 과정

- 검색봇이 웹사이트를 크롤링하면서 수집된 정보를 색인화
- 만약 빈 html 파일을 만나면 검색봇은 해당 사이트가 무슨 서비스에 대한 내용인지 알지 못함(_그러나 구글의 검색봇은 js를 실행시킬 수 있어서 해석 할 수 있음_)

### 사용성

- CSR

  - 사내에서만 쓰는 서비스라서 SEO 가 불필요한 경우

- SSR

  - 이커머스 사이트와 같이 검색 유입이 중요한 경우
  - 초기 로딩 속도가 중요한 경우

- SSG

  - 데이터 변동이 없는 정적 사이트를 렌더링 할 경우

- CSR + SSR (Universal Rendering)
  - 초기 렌더링은 SSR (_초기 구동 속도가 빠름_), 다른 페이지로 디오할 때는 CSR (_페이지 이동 시 깜빡임이 없음_) 방식 사용

### CSR 과 SSR 을 사용하는 라이브러리 & 프레임워크

- React, Nextjs, Gatsby
- Vue, Nuxt
- Angular, Universal
