# Closure (클로저)

함수와 그 함수가 선언됐을 때의 렉시컬 환경(Lexical environment)과의 조합

- 중첩함수인 내부함수가 이미 생명주기를 마감한 외부함수의 지역변수를 참조할 수 있다면 이 내부함수를 클로저라고 함
  - 상위 스코프의 식별자를 참조 할 때
  - 함수가 외부 함수보다 더 오래 살아있을 때
- **자유변수**
  - 클로저에 의해 참조된 변수
- 클로저는 state가 의도치않게 변경되지 않도록 state를 안전하게 은닉하고, 특정함수에서만 state 변경을 허용하기 위해 사용
- 참고로 참조가 없다면 가비지 컬렉터의 수집 대상이며, 상위 스코프의 식별자를 참조하고있다면 가비지 컬렉터는 해당 식별자를 수집 대상에 포함 시키지 않음!

> ### 스코프
>
> 변수이름, 함수이름, 클래스 이름 등과 같은 식별자가 본인이 선언된 위치에 따라 다른 코드에서 자신이 참조되는지의 여부가 결정되는 것
>
> - 스코프는 함수의 중첩에 의해 계층적인 구조를 가질 수 있음
> - 스코프가 계층적으로 연결되어 있는것 👉 **스코프 체인**
> - 자바스크립트 엔진은 스코프체인을 통해 변수를 참조 (식별자를 찾을 떄, 현재 스코프에 없다면 상위 스코프에서 검색을 반복, 없다면 _Reference Error_ 👉 **스코프체이닝** )
> - 스코프 레벨
> - 블록 레벨 스코프
> - 함수 레벨 스코프
> - 상위 스코프
> - 함수 호출 시점 ➡️ 동적 스코프
> - 함수 선언 시점 ➡️ 정적 스코프 (=렉시컬 스코프)
>   - _자바스크립트의 함수는 선언되면서 자신의 내부 슬롯에 상위 스코프의 참조를 저장_
