# TEST

## Test 란?
제작한 시스템이 예상하는 대로 동작하는지 확인 (함수, 기능, UI, 성능, API 스펙)

## Test 시기
QA 단계에서 테스트 시 많이 비용이 발생할 수 있으므로(없을 수는 없겠지만) 개발단계에서 테스트 작성을 하는게 속도 및 비용, 높은 커버리지를 맞출 수 있다.

## Test 코드 작성의 장점
* 기능 정상 작동 확인 가능
* 업무 프로세스 파악
* 이슈 예측
* 버그 조기 발견
* 리팩토링
* 유지보수성 향상
* 코드 품질 향상
* 코드간 의존성 낮춤으로 인한 재사용성 증가
* 문서화
* 개발 시간 절약 (최초작성 시는 더 오래 걸림)

## Test 피라미드
* Unit Test (단위테스트) : 각 각의 단위를 테스트함. (함수, 모듈, 클래스)
* Integration Test (통합테스트) : 각 단위의 상호작용을 테스트함.
* E2E Test (사용자테스트) : 사용자가 실제로 시스템을 사용할 때의 플로우를 테스트함.

## TDD (Test-Driven Development) 
개발 전 테스트 코드를 먼저 작성하는 개발 방법론   
> 테스트 코드 작성 -> 테스트실행 -> 실패 -> 코드 작성 -> 테스트 실행 -> 성공 -> 리팩토링

### TDD 장점
* 모든 요구 사항에 대해 점검 및 이해
* 사용자 입장에서 코드 작성
* 시스템 전반적인 설계 향상

***메인브랜치에 머지될 예정이거나, 사용자에게 노출될 기능이라면 반드시 테스트코드를 포함하는 습관을 가져야한다!***

## CI/CD 관계
* 지속적인 통합(CI) 의 장점은 테스트코드가 있다는 가정하에 있는 장점이다.
  - 코드 변경사항을 주기적으로 빈번하게 머지
  - 통합을 위한 단계 (빌드, 테스트, 머지)의 자동화
  - 코드 퀄리티 향상
  - 버그 수정 용이 (버그 조기 발견)
* 지속적인 통합이 테스트 코드를 통해 문제없이 이루어진다면 지속적인 배포도 매끄럽게 이루어질 수 있다.


## Unit Test
* Test Runner : 테스트 실행 결과 생성
* Assertion : 테스트 조건 비교 로직

### Jest
*javascript test framework*

* zero configuration
* snapshot
* isolated
* great api
* great exception
* code coverage

## 테스트 코드 필수 사항
* 한번 작성된 테스트 코드는 영원히 유지보수 해야 함.
* 내부 구현 사항은 테스트 하면 안됨.
* 재사용성 높여야 함 (테스트 유틸리티)
* 배포용 코드와 철저히 분리
* 테스트코드를 통한 문서화

## 테스트의 구조
1. 준비 (Arrange | ***Given***)
2. 실행 (Act | ***When***)
3. 검증 (Assert | ***Then***)

## 테스트 원칙 ***FIRST***
* Fast : 느린것에 대한 의존성 낮춤. (테스트 코드는 빨라야함!)
* Isolated : 최소한의 유닛으로 검증 (독립, 집중적으로 유지)
* Repeatable : 실행할 때마다 동일한 결과를 유지 (환경에 영향을 받지 않도록 작성!)
* Self-Validating : 스스로 결과 검증 (자동화를 통한 검증단계 - *CI/CD* )
* Timely : 시기적절하게 테스트 코드 작성 (사용자에게 배포되기 전에 테스트 코드 작성)

## 테스트 범위 ***Right-BICEP***
* Right : 모든 요구사항이 정상 동작하는지 확인
* Boundary conditions : 모든 코너 케이스에 대해 테스트
* Inverse relationship : 역관계를 적용해서 결과값을 확인 (일관성 유지)
* Cross-check : 다른 수단을 이용해서 결과값이 맞는지 확인
* Error conditions : 우리가 예상할 수 있는 모든 에러케이스에 대해 테스트 작성
* Performance characteristics : 성능 확인은 테스트를 통해 정확한 수치로 확인 (성능 개선의 척도와 확인도 데이터를 통해 확인)

## 테스트 조건 ***CORRECT***
* Conformance : 특정 포맷 준수 (전화번호, 이메일, 아이디, 파일 확장자 등)
* Ordering : 순서 조건 확인
* Range : 숫자 범위 확인
* Reference : 외부 의존성 유무, 특정 조건 유무
* Existence : 값 존재 유무에 따른 동작 확인
* Cardinality : 0-1-N 법칙에 따라 검증
* Time : 상대, 절대, 동시에 발생할 경우 확인